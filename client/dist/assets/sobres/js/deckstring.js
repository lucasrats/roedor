!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.deckstrings=t()}}(function(){var t;return function t(r,e,n){function o(f,a){if(!e[f]){if(!r[f]){var u="function"==typeof require&&require;if(!a&&u)return u(f,!0);if(i)return i(f,!0);var d=new Error("Cannot find module '"+f+"'");throw d.code="MODULE_NOT_FOUND",d}var c=e[f]={exports:{}};r[f][0].call(c.exports,function(t){var e=r[f][1][t];return o(e?e:t)},c,c.exports,t,r,e,n)}return e[f].exports}for(var i="function"==typeof require&&require,f=0;f<n.length;f++)o(n[f]);return o}({1:[function(r,e,n){!function(r,o){"object"==typeof n&&"undefined"!=typeof e?o(n):"function"==typeof t&&t.amd?t(["exports"],o):o(r.deckstrings={})}(this,function(t){"use strict";function r(t,e,n){e=e||[],n=n||0;for(var o=n;t>=p;)e[n++]=255&t|c,t/=128;for(;t&h;)e[n++]=255&t|c,t>>>=7;return e[n]=0|t,r.bytes=n-o+1,e}function e(t,r){var n,o=0,r=r||0,i=0,f=r,a=t.length;do{if(f>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[f++],o+=i<28?(n&w)<<i:(n&w)*Math.pow(2,i),i+=7}while(n>=l);return e.bytes=f-r,o}function n(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function o(t,r){if(r=r?r:"dbf id",!i(t))throw new Error("Invalid "+r+" "+t+" (expected valid dbf id)")}function i(t){return!("number"!=typeof t||!isFinite(t))&&(Math.floor(t)===t&&t>0)}function f(t){for(var r=[],e=[],n=[],f=0,a=t;f<a.length;f++){var u=a[f],d=void 0,c=u[0],s=u[1];if(o(c,"card"),0!==s){if(1===s)d=r;else if(2===s)d=e;else{if(!i(s))throw new Error("Invalid count "+s+" (expected positive natural number)");d=n}d.push(u)}}return[r,e,n]}function a(t){if("object"!=typeof t||1!==t.format&&2!==t.format||!Array.isArray(t.heroes)||!Array.isArray(t.cards))throw new Error("Invalid deck definition");var r=new C,e=t.format,n=t.heroes,i=t.cards;r.null(),r.varint(q),r.varint(e),r.varint(n.length);for(var a=0,u=n;a<u.length;a++){var d=u[a];o(d,"hero"),r.varint(d)}for(var c=0,s=f(i);c<s.length;c++){var h=s[c];r.varint(h.length);for(var p=0,v=h;p<v.length;p++){var l=v[p],w=l[0],y=l[1];r.varint(w),1!==y&&2!==y&&r.varint(y)}}return r.toString()}function u(t){var r=new U(t);if(0!==r.nextByte())throw new Error("Invalid deckstring");var e=r.nextVarint();if(e!==q)throw new Error("Unsupported deckstring version "+e);var n=r.nextVarint();if(1!==n&&2!==n)throw new Error("Unsupported format "+n+" in deckstring");for(var o=new Array(r.nextVarint()),i=0;i<o.length;i++)o[i]=r.nextVarint();for(var f=[],i=1;i<=3;i++)for(var a=0,u=r.nextVarint();a<u;a++)f.push([r.nextVarint(),1===i||2===i?i:r.nextVarint()]);return{cards:f,heroes:o,format:n}}var d=r,c=128,s=127,h=~s,p=Math.pow(2,31),v=e,l=128,w=127,y=Math.pow(2,7),x=Math.pow(2,14),b=Math.pow(2,21),g=Math.pow(2,28),M=Math.pow(2,35),m=Math.pow(2,42),E=Math.pow(2,49),V=Math.pow(2,56),A=Math.pow(2,63),k=function(t){return t<y?1:t<x?2:t<b?3:t<g?4:t<M?5:t<m?6:t<E?7:t<V?8:t<A?9:10},O={encode:d,decode:v,encodingLength:k},j=function(){function t(){this.index=0}return t.prototype.next=function(t){void 0===t&&(t=1),this.index+=t},t}(),C=function(t){function r(){var r=t.call(this)||this;return r.buffer=[],r}return n(r,t),r.prototype.null=function(){this.buffer[this.index]=0,this.next()},r.prototype.varint=function(t){O.encode(t,this.buffer,this.index),this.next(O.encode.bytes)},r.prototype.toString=function(){var t=String.fromCharCode.apply(String,this.buffer);return btoa(t)},r}(j),U=function(t){function r(r){for(var e=t.call(this)||this,n=atob(r),o=new Uint8Array(n.length),i=0;i<n.length;i++)o[i]=n.charCodeAt(i);return e.buffer=o,e}return n(r,t),r.prototype.nextByte=function(){var t=this.buffer[this.index];return this.next(),t},r.prototype.nextVarint=function(){var t=O.decode(this.buffer,this.index);return this.next(O.decode.bytes),t},r}(j),q=1;t.encode=a,t.decode=u,Object.defineProperty(t,"__esModule",{value:!0})})},{}]},{},[1])(1)});